<!DOCTYPE html>
<html lang="en">
<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Ayam Potong</title>
     <link rel="manifest" href="/manifest.json">
     <link rel="shortcut icon" href="./img/logo.png" type="image/x-icon">
     <link rel="preconnect" href="https://fonts.googleapis.com">
     <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
     <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&display=swap" rel="stylesheet">
     <link rel="stylesheet" href="css/styles.css">
     <link rel="stylesheet" href="css/account.css">
</head>
<body>
<div>
     <form action="" id="profileForm">
          <a href="index.html" class="cs-top-page">
               <img src="img/arrow-narrow-left.svg" alt="arrow-left">
               <h7 style="color: black; font-size: 20px;"> Account</h7>
          </a>
          
          <!-- Input nama -->
          <div style="display: flex; flex-direction: row; align-items:end; ">
               <img src="img/no-profile.png" alt="no profile" style="width: 130px;">
               <div class="box-nama-input">
                    <label for="input" class="cs-text-input">Nama Lengkap:</label>
                    <input type="text" placeholder="Tulis disini..." name="nama" class="input" id="nama">
               </div>
          </div>
          
          <!-- input kelurahan -->
          <div class="box-alamat-input">
               
               <label for="input" class="cs-text-input">Kelurahan:</label>
               <div style="padding: 11px 10px; font-size: 0.75rem; border: 2px #a7a7a6 solid;border-radius: 5px; background: #ffffff;">
                    <div class="inner-box-alamat">
                         <select name="kelurahan" id="kelurahan" class="cs-kelurahan-input">
                              <option value="Cisalak pasar">Cisalak Pasar</option>
                              <option value="Curug">Curug</option>
                              <option value="Harjamukti">Harjamukti</option>
                              <option value="Mekarsari">Mekarsari</option>
                              <option value="Sukatani">Sukatani</option>
                              <option value="Sukamaju Baru">Sukamaju Baru</option>
                         </select>
                    </div>
               </div>
          </div>
          
          <!-- input detail alamat -->
          <div class="box-alamat-input">
               <label for="input" class="cs-text-input">Alamat Lengkap:</label>
               <div style="padding: 11px 10px; font-size: 0.75rem; border: 2px #a7a7a6 solid;border-radius: 5px; background: #ffffff; height: 150px;">
                    <textarea name="input-alamat-lengkap" id="id-lokasi-input" placeholder="(Cth: Nama Jalan, No. Rumah, Blok, Rt, Rw)"></textarea>
               </div>
          </div>
          
          <!-- tombol simpan -->
          <div style="display: flex; justify-content: right;">
               <button type="button" id="btn-simpan">Save <img src="img/save.svg" style="width: 20px;" alt=""></button>
          </div>
     </form>

     <!-- balik ke checkout-->
     <a href="checkout.html">
          <button id="btn-kembali-ke-checkout">Kembali ke pemesanan <img src="img/arrow-narrow-down.svg" alt="arrow-down"></button>
     </a>     
</div>

<div class="error-container-green" id="profil-berhasil-disimpan" style="width: 300px;" onclick="hideAlert()">
     <button type="button" aria-label="close-error" class="error-button-green">
          <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round"
               stroke-linejoin="round" class="close-icon" xmlns="http://www.w3.org/2000/svg">
               <path d="M18 6 6 18"></path>
               <path d="m6 6 12 12"></path>
          </svg>
     </button>
     <p class="error-message">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
               stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
               class="feather feather-check-circle">
               <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
               <polyline points="22 4 12 14.01 9 11.01"></polyline>
          </svg>
          <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path>
          <path d="M12 9v4"></path>
          <path d="M12 17h.01"></path>
          </svg>
          Profil berhasil disimpan
     </p>
</div>

<script src="/service-worker.js"></script>
<script>
     function showAlert() {
               document.getElementById('profil-berhasil-disimpan').classList.add('show');
               setTimeout(hideAlert, 4000);
          }
          function hideAlert() {
               document.getElementById('profil-berhasil-disimpan').classList.remove('show');
          }
     function saveData() {
          const formData = {
               nama: document.getElementById('nama').value,
               kelurahan: document.getElementById('kelurahan').value,
               alamat: document.getElementById('id-lokasi-input').value
          };

          // Simpan ke localStorage
          localStorage.setItem('formData', JSON.stringify(formData));

          showAlert()
     }

     // Fungsi untuk memuat data dari localStorage
     function loadData() {
          const savedData = JSON.parse(localStorage.getItem('formData'));

          if (savedData) {
               document.getElementById('nama').value = savedData.nama || '';
               document.getElementById('kelurahan').value = savedData.kelurahan || '';
               document.getElementById('id-lokasi-input').value = savedData.alamat || '';
          }
     }

     // Event listener untuk tombol save
     document.getElementById('btn-simpan').addEventListener('click', function(event) {
          event.preventDefault(); // Mencegah reload halaman
          saveData();
     });

     // Muat data saat halaman dibuka kembali
     window.addEventListener('load', loadData);
</script>
</body>
</html>